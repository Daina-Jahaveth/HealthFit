<!DOCTYPE html>
<html lang="es">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Plan Personalizado</title>
    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css" rel="stylesheet">
    <link rel="stylesheet" href="../assets/css/style.css"> <!-- Archivo CSS personalizado -->
    <style>
        body {
            background-color: #f5f5f5; /* Color de fondo suave */
            font-family: 'Arial', sans-serif; /* Fuente */
            margin: 0; /* Eliminar márgenes */
        }

        header {
            background-color: #000; /* Color de fondo del header */
            padding: 15px 0; /* Espaciado superior e inferior */
            box-shadow: 0 2px 10px rgba(0, 0, 0, 0.3); /* Sombra suave */
        }

        header .navbar-brand {
            color: #ffffff; /* Color del texto del encabezado */
            font-weight: bold; /* Hacer el texto más grueso */
            font-size: 1.5rem; /* Tamaño de fuente */
        }

        .container {
            margin-top: 30px; /* Espacio superior */
            padding: 20px; /* Espaciado interno */
            background: white; /* Fondo blanco para el contenido */
            border-radius: 10px; /* Bordes redondeados */
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.1); /* Sombra para profundidad */
        }

        h2 {
            color: #000; /* Color del título */
            margin-bottom: 20px; /* Espacio inferior */
            text-align: center; /* Centrar título */
            font-size: 2.5rem; /* Aumentar tamaño de título */
        }

        h3 {
            color: #000; /* Color de los subtítulos */
            margin-bottom: 10px; /* Espacio inferior */
            font-size: 1.8rem; /* Tamaño de subtítulo */
        }

        .plan-section {
            margin-bottom: 30px; /* Espacio inferior entre secciones */
            padding: 15px; /* Espaciado interno */
            background: #ffffff; /* Fondo blanco para secciones */
            border-radius: 8px; /* Bordes redondeados */
            transition: 0.3s; /* Transición suave al pasar el mouse */
        }

        .plan-section:hover {
            box-shadow: 0 4px 20px rgba(0, 0, 0, 0.2); /* Sombra más pronunciada */
        }

        .row {
            display: flex; /* Utilizar flexbox para las columnas */
            flex-wrap: wrap; /* Permitir que las columnas se ajusten */
            gap: 20px; /* Espacio entre columnas */
        }

        .diet-card,
        .exercise-card {
            flex: 1 1 calc(30% - 20px); /* Tres columnas con espacio */
            margin-bottom: 20px; /* Espacio inferior */
            background-color: #e9ecef; /* Fondo suave */
            padding: 10px; /* Espaciado interno */
            color: black; /* Color del texto */
            box-shadow: 0 2px 5px rgba(0, 0, 0, 0.1); /* Sombra suave */
            transition: transform 0.2s; /* Efecto de hover */
            display: flex; /* Flexbox para contenido interno */
            flex-direction: column; /* Colocar contenido en columnas */
            justify-content: space-between; /* Espacio entre elementos */
            height: auto; /* Altura automática para tarjetas */
            overflow: hidden; /* Ocultar el desbordamiento */
        }

        .exercise-card:hover {
            transform: scale(1.02); /* Efecto de aumento al pasar el mouse */
        }

        .exercise-card img {
            width: 100%; /* Ancho de la imagen */
            height: 120px; /* Altura fija para imágenes */
            object-fit: cover; /* Mantener proporciones */
            border-radius: 5px; /* Bordes redondeados para las imágenes */
            margin: 0; /* Sin margen */
        }

        .exercise-card p {
            margin: 5px 0; /* Reducir espacio entre párrafos */
        }

        .exercise-card h4 {
            margin-bottom: 10px;
        }

        .additional-info {
            display: none; /* Inicialmente oculto */
            margin-top: 10px; /* Espacio superior */
            font-size: 0.9rem; /* Tamaño de fuente más pequeño */
        }

        footer {
            background-color: #1e1e1e;
            color: #ffffff;
            text-align: center;
            padding: 10px 0;
            position: relative;
            bottom: 0;
            width: 100%;
        }

        .btn-expand {
            margin-top: 10px; /* Espacio superior */
            background-color: #ff9800; /* Color del botón */
            border: none; /* Sin borde */
            color: #ffffff; /* Texto blanco */
            transition: background-color 0.3s; /* Transición suave */
            width: 100%; /* Botón ocupa todo el ancho */
        }

        .btn-expand:hover {
            background-color: #e68a00; /* Color del botón al pasar el mouse */
        }
    </style>
</head>

<body>
    <header class="navbar navbar-dark bg-dark">
        <a class="navbar-brand" href="index.html">HealthFit</a>
    </header>

    <div class="container">
        <h2>Tu Plan Personalizado</h2>

        <div class="plan-section">
            <h3>Detalles de tu Plan de Ejercicio</h3>
            <div class="row">
                <div class="exercise-card">
                    <img src="https://media.gettyimages.com/id/497041804/es/v%C3%ADdeo/mo-de-san-luis-obispo-de-mujer-corriendo-hacia-puesta-de-sol.jpg?s=640x640&k=20&c=AhEbNQDumOG7rG7CaMR09cb1oVp5PQP78cHAMDWAcXA=" alt="Correr" />
                    <h4>Correr</h4>
                    <p><strong>Parte del cuerpo:</strong> Piernas y Cardio</p>
                    <p><strong>Series:</strong> 1</p>
                    <p><strong>Repeticiones:</strong> 1 vez a la semana</p>
                    <button class="btn-expand" onclick="toggleExpand(this)">Haz clic para expandir</button>
                    <div class="additional-info">
                        <p><strong>Repeticiones:</strong> 10-15 veces</p>
                    </div>
                </div>
                <div class="exercise-card">
                    <img src="https://images.ecestaticos.com/d0qhVZsTMdrH3RKEcXh9g-2yVIc=/0x0:0x0/1200x675/filters:fill(white):format(jpg)/f.elconfidencial.com%2Foriginal%2F572%2F679%2F17e%2F57267917e552e4d4474852040d7f390b.jpg" alt="Flexiones" />
                    <h4>Flexiones de brazos</h4>
                    <p><strong>Parte del cuerpo:</strong> Pecho</p>
                    <p><strong>Series:</strong> 3</p>
                    <p><strong>Repeticiones:</strong> 10-15 veces</p>
                    <button class="btn-expand" onclick="toggleExpand(this)">Haz clic para expandir</button>
                    <div class="additional-info">
                        <p><strong>Repeticiones:</strong> 10-15 veces</p>
                    </div>
                </div>
                <div class="exercise-card">
                    <img src="https://plus.unsplash.com/premium_photo-1661374894884-52d7f260cd97?fm=jpg&q=60&w=3000&ixlib=rb-4.0.3&ixid=M3wxMjA3fDB8MHxzZWFyY2h8MXx8c3F1YXR8ZW58MHx8MHx8fDA%3D" alt="Sentadillas" />
                    <h4>Sentadillas</h4>
                    <p><strong>Parte del cuerpo:</strong> Piernas</p>
                    <p><strong>Series:</strong> 3</p>
                    <p><strong>Repeticiones:</strong> 12-15 veces</p>
                    <button class="btn-expand" onclick="toggleExpand(this)">Haz clic para expandir</button>
                    <div class="additional-info">
                        <p><strong>Repeticiones:</strong> 12-15 veces</p>
                    </div>
                </div>
                <div class="exercise-card">
                    <img src="https://blogscdn.thehut.net/app/uploads/sites/450/2021/03/shutterstock_432321202opt_hero_1615561971_1616169479_1200x672_acf_cropped.jpg" alt="Abdominales" />
                    <h4>Abdominales</h4>
                    <p><strong>Parte del cuerpo:</strong> Abdomen</p>
                    <p><strong>Series:</strong> 3</p>
                    <p><strong>Repeticiones:</strong> 15-20 veces</p>
                    <button class="btn-expand" onclick="toggleExpand(this)">Haz clic para expandir</button>
                    <div class="additional-info">
                        <p><strong>Repeticiones:</strong> 15-20 veces</p>
                    </div>
                </div>
                <div class="exercise-card">
                    <img src="https://hips.hearstapps.com/hmg-prod/images/mid-adult-man-doing-plank-exercise-royalty-free-image-1585917009.jpg?crop=1xw:0.84375xh;center,top" alt="Plancha" />
                    <h4>Plancha</h4>
                    <p><strong>Parte del cuerpo:</strong> Core</p>
                    <p><strong>Series:</strong> 3</p>
                    <p><strong>Duración:</strong> 30-60 segundos</p>
                    <button class="btn-expand" onclick="toggleExpand(this)">Haz clic para expandir</button>
                    <div class="additional-info">
                        <p><strong>Duración:</strong> 30-60 segundos</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="plan-section">
            <h3>Detalles de tu Plan de Dieta</h3>
            <div class="row">
                <div class="diet-card">
                    <h4>Lunes</h4>
                    <p><strong>Desayuno:</strong> Batido de proteínas con plátano - 600 calorías</p>
                    <p><strong>Almuerzo:</strong> Arroz con pollo y verduras - 700 calorías</p>
                    <p><strong>Comida:</strong> Ensalada de garbanzos - 400 calorías</p>
                    <p><strong>Cena:</strong> Filete de pescado con espárragos - 500 calorías</p>
                    <button class="btn-expand" onclick="toggleExpand(this)">Haz clic para expandir</button>
                    <div class="additional-info">
                        <p><strong>Recomendaciones:</strong> Intenta consumir frutas frescas como snacks.</p>
                    </div>
                </div>
                <div class="diet-card">
                    <h4>Martes</h4>
                    <p><strong>Desayuno:</strong> Yogur griego con frutas - 400 calorías</p>
                    <p><strong>Almuerzo:</strong> Quinoa con verduras y pollo - 500 calorías</p>
                    <p><strong>Comida:</strong> Hummus con zanahorias - 250 calorías</p>
                    <p><strong>Cena:</strong> Pollo al horno con verduras - 600 calorías</p>
                    <button class="btn-expand" onclick="toggleExpand(this)">Haz clic para expandir</button>
                    <div class="additional-info">
                        <p><strong>Recomendaciones:</strong> Evita alimentos procesados.</p>
                    </div>
                </div>
                <div class="diet-card">
                    <h4>Miércoles</h4>
                    <p><strong>Desayuno:</strong> Tortilla con espinacas - 400 calorías</p>
                    <p><strong>Almuerzo:</strong> Ensalada de atún - 450 calorías</p>
                    <p><strong>Comida:</strong> Pesto de pollo con pasta - 550 calorías</p>
                    <p><strong>Cena:</strong> Salmón a la parrilla con ensalada - 500 calorías</p>
                    <button class="btn-expand" onclick="toggleExpand(this)">Haz clic para expandir</button>
                    <div class="additional-info">
                        <p><strong>Recomendaciones:</strong> Incluye más verduras en tus comidas.</p>
                    </div>
                </div>
                <div class="diet-card">
                    <h4>Jueves</h4>
                    <p><strong>Desayuno:</strong> Batido verde - 350 calorías</p>
                    <p><strong>Almuerzo:</strong> Pescado al horno con espárragos - 450 calorías</p>
                    <p><strong>Comida:</strong> Ensalada de quinoa - 400 calorías</p>
                    <p><strong>Cena:</strong> Tacos de pollo - 600 calorías</p>
                    <button class="btn-expand" onclick="toggleExpand(this)">Haz clic para expandir</button>
                    <div class="additional-info">
                        <p><strong>Recomendaciones:</strong> Elige tortillas integrales.</p>
                    </div>
                </div>
                <div class="diet-card">
                    <h4>Viernes</h4>
                    <p><strong>Desayuno:</strong> Avena con leche y frutas - 350 calorías</p>
                    <p><strong>Almuerzo:</strong> Pollo al vapor con verduras - 400 calorías</p>
                    <p><strong>Comida:</strong> Tortilla de espinacas - 300 calorías</p>
                    <p><strong>Cena:</strong> Pasta integral con verduras - 600 calorías</p>
                    <button class="btn-expand" onclick="toggleExpand(this)">Haz clic para expandir</button>
                    <div class="additional-info">
                        <p><strong>Recomendaciones:</strong> Bebe suficiente agua durante el día.</p>
                    </div>
                </div>
                <div class="diet-card">
                    <h4>Sábado</h4>
                    <p><strong>Desayuno:</strong> Tostadas integrales con huevo - 450 calorías</p>
                    <p><strong>Almuerzo:</strong> Pizza casera con vegetales - 600 calorías</p>
                    <p><strong>Comida:</strong> Arroz con atún - 500 calorías</p>
                    <p><strong>Cena:</strong> Ensalada César - 400 calorías</p>
                    <button class="btn-expand" onclick="toggleExpand(this)">Haz clic para expandir</button>
                    <div class="additional-info">
                        <p><strong>Recomendaciones:</strong> Prefiere la fruta en su estado natural.</p>
                    </div>
                </div>
                <div class="diet-card">
                    <h4>Domingo</h4>
                    <p><strong>Desayuno:</strong> Pancakes de avena - 500 calorías</p>
                    <p><strong>Almuerzo:</strong> Ensalada de garbanzos - 400 calorías</p>
                    <p><strong>Comida:</strong> Quinoa con pollo - 550 calorías</p>
                    <p><strong>Cena:</strong> Wrap de verduras - 300 calorías</p>
                    <button class="btn-expand" onclick="toggleExpand(this)">Haz clic para expandir</button>
                    <div class="additional-info">
                        <p><strong>Recomendaciones:</strong> Mantén una dieta balanceada durante el día.</p>
                    </div>
                </div>
            </div>
        </div>

        <div class="plan-section">
            <h3>Proporciona tu Ubicación</h3>
            <p>Haz clic en el botón para acceder a tu ubicación actual y recibir recomendaciones de lugares donde comprar tus alimentos:</p>
            <button class="btn btn-warning btn-location" onclick="getLocation()">Obtener mi Ubicación</button>
            <div id="map"></div>
            <ul id="store-list" class="plan-list"></ul>
        </div>

        <a href="tracking.html" class="btn btn-warning btn-back">Ir a Tracking</a> <!-- Cambié la redirección a la página de seguimiento -->
    </div>

    <footer>
        <p>&copy; 2024 HealthFit. Todos los derechos reservados.</p>
    </footer>

    <script>
        // Obtener datos de la encuesta desde localStorage
        const surveyData = JSON.parse(localStorage.getItem('surveyData'));

        // Función para generar el plan de ejercicio y dieta basado en las respuestas
        function generatePlan() {
            const exercisePlan = document.getElementById('exercise-plan');

            if (!surveyData) {
                exercisePlan.innerHTML = '<li>No se encontraron datos de la encuesta.</li>';
                return;
            }

            const { weight, height, sex, availableTime, bodyType } = surveyData;

            // Generar el plan de ejercicio
            let exercises = [];
            if (availableTime === '30 minutos') {
                exercises.push('Ejercicio cardiovascular (correr o caminar rápido) - 15 minutos');
                exercises.push('Entrenamiento de fuerza con el peso corporal (flexiones, sentadillas) - 3 series de 10 repeticiones');
            } else if (availableTime === '1 hora') {
                exercises.push('Correr 5 km - A un ritmo moderado');
                exercises.push('Entrenamiento de circuito (incluir pesas) - 3 series de 10 repeticiones');
            } else if (availableTime === '1.5 horas') {
                exercises.push('Correr 10 km - A un ritmo moderado');
                exercises.push('Entrenamiento de fuerza avanzado (pesas pesadas) - 4 series de 8 repeticiones');
            } else {
                exercises.push('Entrenamiento personalizado de acuerdo a tu nivel');
            }

            // Llenar la lista de ejercicios
            exercises.forEach(exercise => {
                const li = document.createElement('li');
                li.className = 'plan-item';
                li.textContent = exercise;
                exercisePlan.appendChild(li);
            });
        }

        // Función para mostrar/ocultar información adicional al hacer clic en el botón
        function toggleExpand(button) {
            const additionalInfo = button.nextElementSibling;
            if (additionalInfo.style.display === "block") {
                additionalInfo.style.display = "none";
                button.textContent = "Haz clic para expandir";
            } else {
                additionalInfo.style.display = "block";
                button.textContent = "Haz clic para contraer";
            }
        }

        // Función para obtener la ubicación del usuario
        function getLocation() {
            if (navigator.geolocation) {
                navigator.geolocation.getCurrentPosition(showPosition, showError);
            } else {
                alert("La geolocalización no es soportada por este navegador.");
            }
        }

        // Mostrar la posición en el mapa y la lista de tiendas
        function showPosition(position) {
            const lat = position.coords.latitude;
            const lon = position.coords.longitude;
            const storeList = document.getElementById('store-list');

            // Limpiar la lista de tiendas
            storeList.innerHTML = '';

            // Inicializar el mapa
            initMap(lat, lon);

            // Simulando una búsqueda de tiendas
            const stores = ['Supermercado A', 'Tienda B', 'Mercado C'];
            stores.forEach(store => {
                const li = document.createElement('li');
                li.className = 'plan-item';
                li.textContent = `${store} cerca de (${lat}, ${lon})`;
                storeList.appendChild(li);
            });
        }

        // Inicializar el mapa
        function initMap(lat, lon) {
            const mapOptions = {
                center: { lat: lat, lng: lon },
                zoom: 14,
            };
            const map = new google.maps.Map(document.getElementById('map'), mapOptions);

            // Crear un marcador para la ubicación del usuario
            new google.maps.Marker({
                position: { lat: lat, lng: lon },
                map: map,
                title: "Tu Ubicación",
            });

            // Agregar marcadores para tiendas
            const stores = [
                { name: "Supermercado A", location: { lat: lat + 0.01, lng: lon + 0.01 } },
                { name: "Tienda B", location: { lat: lat + 0.01, lng: lon - 0.01 } },
                { name: "Mercado C", location: { lat: lat - 0.01, lng: lon + 0.01 } },
            ];

            stores.forEach(store => {
                new google.maps.Marker({
                    position: store.location,
                    map: map,
                    title: store.name,
                });
            });
        }

        // Manejo de errores en geolocalización
        function showError(error) {
            switch (error.code) {
                case error.PERMISSION_DENIED:
                    alert("Permiso de geolocalización denegado.");
                    break;
                case error.POSITION_UNAVAILABLE:
                    alert("La ubicación no está disponible.");
                    break;
                case error.TIMEOUT:
                    alert("La solicitud de geolocalización ha tardado demasiado.");
                    break;
                case error.UNKNOWN_ERROR:
                    alert("Se ha producido un error desconocido.");
                    break;
            }
        }

        // Ejecutar la función para generar el plan
        generatePlan();
    </script>

    <script src="../assets/js/main.js"></script> <!-- Archivo JavaScript personalizado -->
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
</body>

</html>
